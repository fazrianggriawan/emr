<div class="row">
    <div class="col-auto">
        Dari :
            <p-calendar
                (ngModelChange)="getDataHistory()"
                [(ngModel)]="filter.from"
                [readonlyInput]="true"
                [maxDate]="today"
                [style]="{width:'120px'}"
                appendTo="body"
                dateFormat="d M yy"
                styleClass="mr-2">
            </p-calendar>

        Sampai :
            <p-calendar
                (ngModelChange)="getDataHistory()"
                [(ngModel)]="filter.to"
                [readonlyInput]="true"
                [maxDate]="today"
                [style]="{width:'120px'}"
                dateFormat="d M yy"
                appendTo="body">
            </p-calendar>
    </div>
    <div class="col-auto pd-l-1">
        <button class="btn" (click)="getDataHistory()"><i class="bi bi-arrow-clockwise"></i></button>
    </div>
</div>
<div class="row mg-t-10">
    <div class="col">
        <table class="table table-striped table-hover border-bottom">
            <thead>
                <tr class="bg-gray-300">
                    <th>No. SEP</th>
                    <th>Jns. Pelayanan</th>
                    <th>Poli / Ruangan</th>
                    <th>PPK</th>
                    <th>No. Rujukan</th>
                    <th width="100">Tgl. <br>SEP</th>
                    <th width="100">Tgl. <br>Pulang</th>
                    <th width="120">&nbsp;</th>
                </tr>
            </thead>
            <tbody *ngIf="dataHistory">
                <tr *ngFor="let item of dataHistory">
                    <td>{{item.noSep}}</td>
                    <td>
                        <span *ngIf="item.jnsPelayanan === '1'">RAWAT INAP</span>
                        <span *ngIf="item.jnsPelayanan === '2'">RAWAT JALAN</span>
                    </td>
                    <td>
                        <span *ngIf="item.poli">{{item.poli}}</span>
                        <span *ngIf="!item.poli">-</span>
                    </td>
                    <td>{{item.ppkPelayanan}}</td>
                    <td>{{item.noRujukan}}</td>
                    <td>{{item.tglSep}}</td>
                    <td>
                        {{item.tglPlgSep}}
                        <button
                            *ngIf="!item.tglPlgSep"
                            class="btn btn-icon btn-light mr-1"
                            (click)="pasienPulang(item)">
                                Form Pulang
                        </button>
                    </td>
                    <td>
                        <button class="btn btn-outline-primary rounded-circle btn-icon mr-1 float-left" (click)="vclaimService.printSep(item.noSep)">
                            <div><i class="bi bi-printer"></i></div>
                        </button>

                        <button class="btn btn-outline-secondary rounded-circle btn-icon mr-1 float-left" (click)="delete(item.noSep)">
                            <div><i class="bi bi-trash"></i></div>
                        </button>
                    </td>
                </tr>
            </tbody>
            <tfoot *ngIf="!dataHistory">
                <tr>
                    <td colspan="7" class="tx-center">Tidak ada data saat ini.</td>
                </tr>
            </tfoot>
        </table>
    </div>
</div>

<p-confirmDialog header="Konfirmasi" icon="pi pi-exclamation-triangle"></p-confirmDialog>

<p-dialog
    header="Form Pasien Pulang"
    (onHide)="formPasienPulangService.closeDialog()"
    [(visible)]="dialogFormPasienPulang"
    [style]="{width: '600px'}"
    appendTo="body"
    [modal]="true">
        <app-form-pasien-pulang></app-form-pasien-pulang>
</p-dialog>