<div class="row mt-3">
    <div class="col-3">
        <app-tarif></app-tarif>
    </div>
    <div class="col ml-3 shadow p-3 border rounded">
        <app-billing></app-billing>
    </div>
    <div class="col-3 ml-3">
        <div class="shadow border p-3 rounded" style="background-color: cornsilk; top: 50px !important;">
            <div class="row">
                <div class="col">
                    <h3>Kasir</h3>
                </div>
            </div>
            <hr class="m-0 mb-2">
            <div class="row mb-2">
                <div class="col">Discount Semua Pemeriksaan (%)</div>
                <div class="col-auto text-right">
                    <a class="clickable text-primary">10%</a>
                </div>
            </div>
            <div class="row mb-2">
                <div class="col">Discount Total Billing</div>
                <div class="col-auto text-right">
                    <a class="clickable text-primary">0</a>
                </div>
            </div>
            <div class="row mb-2">
                <div class="col">Alasan Discount</div>
                <div class="col-auto text-right">
                    <a class="clickable text-primary"><i>Catatan</i></a>
                </div>
            </div>
            <div class="row mb-2">
                <div class="col">Pajak</div>
                <div class="col-auto text-right">
                    <a class="clickable text-primary">0</a>
                </div>
            </div>
            <div class="row mb-2">
                <div class="col">Total</div>
                <div class="col-auto text-right">
                    <a class="clickable text-primary">0</a>
                </div>
            </div>
            <hr>
            <div class="row">
                <div class="col">
                    <div class="bold">Tagihan</div>
                    <div class="bg-gray-100 rounded border p-1 pl-2 pr-2 tx-16">{{tagihan | number}}</div>
                </div>
                <div class="col">
                    <div>Jns. Pembayaran</div>
                    <p-dropdown
                        [autoDisplayFirst]="false"
                        [options]="jnsBayar"
                        [(ngModel)]="selectedJnsBayar"
                        optionValue="id"
                        optionLabel="name" [style]="{width: '100%'}">
                    </p-dropdown>
                </div>
            </div>
            <div class="row" *ngIf="tagihan == 0 && dataBilling.length > 0">
                <div class="col text-center">
                    <div class="alert alert-success mt-2 mb-0">
                        <h3 class="m-0">LUNAS</h3>
                    </div>
                </div>
            </div>

            <div class="row mt-2" *ngIf="tagihan > 0">
                <div class="col text-right">
                    <button
                        class="btn btn-primary"
                        [disabled]="!selectedJnsBayar || totalBayar == 0"
                        (click)="confirmAddPembayaran($event)">
                            <i class="bi bi-plus-lg mr-1"></i>Bayar
                    </button>

                    <!-- <div>Jumlah Bayar</div>
                    <div class="input-group">
                        <input class="form-control tx-18 tx-bold bg-white text-dark" type="text" (ngModelChange)="formatNumber($event)" [(ngModel)]="totalBayar">
                        <div class="input-group-append">
                            <button
                                class="btn btn-primary"
                                type="button" id="button-addon2"
                                [disabled]="!selectedJnsBayar || totalBayar == 0"
                                (click)="confirmAddPembayaran($event)">
                                    <i class="bi bi-plus-lg mr-1"></i>Bayar
                            </button>
                        </div>
                    </div> -->
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <hr class="mt-3 mb-2">
                    <div class="tx-14 mb-1">Data Pembayaran</div>
                    <table class="table table-striped table-hover border bg-white">
                        <thead>
                            <tr class="bg-white">
                                <th>Jns. Pembayaran</th>
                                <th>Jumlah</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let item of dataPembayaran">
                                <td>{{item.r_cara_bayar.name | uppercase}}</td>
                                <td>{{item.jumlah | number}}</td>
                                <td>
                                    <button (click)="confirmDeletePembayaran($event, item)" pButton pRipple type="button" icon="pi pi-times" class="p-button-sm p-button-rounded p-button-danger p-button-text"></button>
                                </td>
                            </tr>
                            <tr *ngIf="dataPembayaran.length == 0">
                                <td colspan="3" class="text-center text-muted">Tidak ada data pembayaran</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="text-right" *ngIf="dataPembayaran.length > 0">
                        <button class="btn btn-sm btn-outline-dark"><i class="bi bi-printer"></i> Print <i class="bi bi-chevron-down"></i></button>
                    </div>
                </div>
            </div>
            <hr>
        </div>
    </div>
</div>

<p-confirmPopup></p-confirmPopup>