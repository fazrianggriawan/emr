<div class="row">
    <div class="col-9">
        <app-billing [showTarif]="false" [btnKwitansi]="true"></app-billing>
    </div>
    <div class="col-3">
        <div class="row">
            <div class="col-auto">
                <app-laporan-transaksi-billing></app-laporan-transaksi-billing>
            </div>
            <div class="col-auto pd-l-0">
                <app-form-pulang-perawatan></app-form-pulang-perawatan>
            </div>
        </div>

        <div class="shadow border mg-t-10 p-3 bg-white rounded" style="top: 50px !important;">
            <div class="row">
                <div class="col">
                    <h3>Kasir</h3>
                </div>
            </div>
            <hr class="m-0 mb-2">
            <div class="row">
                <div class="col-5">
                    Total
                </div>
                <div class="col">
                    <input type="text" class="form-control" value="{{totalBilling | number}}" readonly>
                </div>
            </div>
            <div class="row mg-t-5">
                <div class="col-5">
                    Administrasi
                </div>
                <div class="col">
                    <input type="text" class="form-control" value="{{administrasi | number}}" readonly>
                </div>
            </div>
            <div class="row mg-t-5">
                <div class="col-5">
                    Layanan Faskes
                </div>
                <div class="col">
                    <input type="text" class="form-control" value="{{layananFaskes | number}}" (blur)="hitungFaskes($event)">
                </div>
            </div>
            <div class="row mg-t-5">
                <div class="col-5">
                    Tagihan
                </div>
                <div class="col">
                    <input type="text" class="form-control" value="{{tagihan | number}}" readonly>
                </div>
            </div>
            <div class="row mg-t-5">
                <div class="col-5">
                    Jns.Pembayaran
                </div>
                <div class="col">
                    <p-dropdown
                        [autoDisplayFirst]="false"
                        [options]="jnsBayar"
                        [(ngModel)]="selectedJnsBayar"
                        optionValue="id"
                        optionLabel="name" [style]="{width: '100%'}">
                    </p-dropdown>
                </div>
            </div>
            <div class="row mg-t-10 pd-b-10">
                <div class="col text-right">
                    <button
                        class="btn btn-primary btn-block"
                        [disabled]="!selectedJnsBayar || tagihan == 0 || statusBilling != 'open'"
                        (click)="confirmAddPembayaran($event)">
                            <i class="bi bi-plus-lg mr-1"></i>Bayar
                    </button>
                </div>
            </div>
            <div class="row mg-t-10 border-bottom pd-b-5">
                <div class="col-auto">
                    <div>Data Pembayaran</div>
                </div>
            </div>
            <div class="row mg-t-10">
                <div class="col">
                    <!-- <div class="card" *ngFor="let item of dataPembayaran">
                        <div class="card-content">
                            <div class="tx-gray-600">{{item.no_pembayaran}}</div>
                        </div>
                    </div> -->
                    <table class="table table-striped table-hover border bg-white mg-b-0">
                        <thead>
                            <tr class="bg-white">
                                <th>Jns. Pembayaran</th>
                                <th>Jumlah</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let item of dataPembayaran">
                                <td>{{item.r_cara_bayar.name | uppercase}}</td>
                                <td>{{item.jumlah | number}}</td>
                                <td>
                                    <button class="btn btn-xs btn-outline-primary" (click)="printBilling(item)">
                                        <i class="bi bi-printer"></i>
                                    </button>
                                    <button class="btn btn-xs btn-outline-primary mg-l-5" (click)="confirmDeletePembayaran($event, item)">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr *ngIf="dataPembayaran.length == 0">
                                <td colspan="3" class="text-center text-muted">Tidak ada data pembayaran</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="row mg-t-5">
                <div class="col">
                    <button class="btn btn-secondary btn-block" [disabled]="dataPembayaran.length == 0" (click)="printKwitansi()">
                            <i class="bi bi-printer"></i> Print Kwitansi
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<p-confirmPopup></p-confirmPopup>