<div class="row mt-3">
    <div class="col-3">
        <div class="border-bottom pb-2">
            Tanggal :
            <p-calendar [(ngModel)]="tanggal" dateFormat="dd-mm-yy"></p-calendar>
        </div>
        <div class="mt-2">
            <p-selectButton [options]="filter" [(ngModel)]="selectedFilter" optionValue="id" optionLabel="name"></p-selectButton>
        </div>
        <div class="row mt-2">
            <div class="col">
                <div class="shadow-sm p-3 rounded mb-2 border clickable hover" *ngFor="let item of dataOrder">
                    <div><span class="text-muted">Nama : </span> {{item.nama | uppercase}} </div>
                    <div><span class="text-muted">No. RM : </span> {{item.norm}}</div>
                    <div><span class="badge badge-light pl-3 pr-3">No.Registrasi </span> {{item.noreg}}</div>
                    <div><span class="badge badge-light pl-3 pr-3">Ruangan </span> {{item.nama_ruangan}}</div>
                    <div><span class="badge badge-light pl-3 pr-3">Dokter </span> {{item.dokter}}</div>
                </div>
            </div>
        </div>
    </div>
    <div class="col rounded shadow border p-3">
        <h5 class="border-bottom pb-3">Data Permintaan Pemeriksaan</h5>
        <div class="mt-3">
            <button class="btn btn-sm btn-primary mr-2" [disabled]="true"><i class="bi bi-check-circle"></i> Proses Pemeriksaan</button>
            <button class="btn btn-sm btn-outline-secondary mr-2" [disabled]="true"><i class="bi bi-file-earmark-plus"></i> Input Hasil</button>
            <button class="btn btn-sm btn-outline-secondary mr-2" [disabled]="true"><i class="bi bi-clock"></i> Riwayat</button>
            <button class="btn btn-sm btn-outline-secondary mr-2" [disabled]="true"><i class="bi bi-trash"></i> Batalkan</button>
        </div>
        <div class="mt-3">
            <p-table
                [value]="dataOrder"
                [(selection)]="selectedPemeriksaan"
                [rowHover]="true"
                dataKey="id"
                scrollHeight="600px"
                responsiveLayout="scroll"
                styleClass="p-datatable-sm table-striped table-hover bd">
                <ng-template pTemplate="header">
                    <tr>
                        <th></th>
                        <th>Pemeriksaan</th>
                        <th>Status</th>
                        <th>Billing</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-item let-i="rowIndex">
                    <tr class="p-selectable-row">
                        <td>
                            <p-tableCheckbox [value]="item"></p-tableCheckbox>
                        </td>
                        <td>{{item.name}}</td>
                        <td></td>
                        <td>
                            <a class="link text-primary"><i class="bi bi-plus"></i> Input Billing</a>
                        </td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="footer">
                    <tr *ngIf="dataOrder.length == 0">
                        <td colspan="4" style="font-weight: normal; text-align: center; color: gray;">Tidak ada order saat ini.</td>
                    </tr>
                </ng-template>
            </p-table>
        </div>

    </div>
    <div class="col rounded border bg-white shadow pt-3 ml-3">
        <div class="row">
            <div class="col">
                <h5 class="border-bottom pb-3">Hasil Radiologi</h5>
                <div class="tx-center p-3 mb-3 mt-3" hidden>
                    <img [src]="'assets/icons/mri.svg'" class="mt-5" alt="Image Empty" height="100vw">
                    <div class="mt-3">Belum ada hasil saat ini.</div>
                </div>
            </div>
        </div>
        <div class="">
            <div class="row mb-3">
                <div class="col-auto">
                    <div>Tanggal Hasil</div>
                    <p-calendar dateFormat="dd-mm-yy"></p-calendar>
                    <!-- <input type="text" value="12 Jun 2022" name="tglHasil" class="form-control" style="width: 120px;"> -->
                </div>
                <div class="col">
                    <div>Dokter Radiologi</div>
                    <input type="text" value="dr.Priatna,Sp.Rad" name="tglHasil" class="form-control">
                </div>
            </div>
            <div class="row mb-2">
                <div class="col bg-gray-100 p-3">
                    <h5 class="mb-3">Kesimpulan Pemeriksaan</h5>
                    <div class="mb-2">
                        <button class="btn btn-sm btn-outline-secondary"><i class="bi bi-card-text"></i> Template Hasil</button>
                    </div>
                    <p-editor name="hasil" placeholder="Ketikan hasil di sini..."></p-editor>
                </div>
            </div>
            <div class="row mb-2 mt-4">
                <div class="col">
                    <h5 class="mb-3"><i class="bi bi-image"></i> Photo & Files</h5>
                    <div class="row">
                        <div class="col">
                            <p-fileUpload
                                #fileInput
                                chooseLabel="Pilih File"
                                [maxFileSize]="20000000"
                                [multiple]="true"
                                [customUpload]="true"
                                [auto]="false"
                                [chooseIcon]="'bi bi-upload'"
                                (uploadHandler)="onUpload($event)">
                                <ng-template pTemplate="content">
                                    <p-progressBar *ngIf="loading" mode="indeterminate" [style]="{height: '4px'}"></p-progressBar>

                                    <div class="row">
                                        <div class="col-auto rounded border p-2 mr-2" *ngFor="let item of uploadedFiles">
                                            <p-image *ngIf="item.type == 'image/jpeg' || item.type == 'image/png'" appendTo="body" [src]="getImage(item.file_location)" alt="{{item.filename}}" height="50" [preview]="true"></p-image>
                                        </div>
                                    </div>

                                    <div class="rounded border bg-gray-100 tx-center p-5 tx-gray-500 mt-1">
                                        <h2 class="tx-gray-800"><i class="bi bi-cloud-upload-fill mr-2"></i> UPLOAD FILES</h2>
                                        <div class="tx-15">Pilih File atau Drag and Drop Di Sini.</div>
                                    </div>
                                    <table class="table table-hover table-striped" *ngIf="uploadedFiles">
                                        <thead>
                                            <tr>
                                                <th>Photo / File</th>
                                                <th>Filename</th>
                                                <th>Size</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let item of uploadedFiles">
                                                <td>
                                                    <p-image *ngIf="item.type == 'image/jpeg' || item.type == 'image/png'" appendTo="body" [src]="getImage(item.file_location)" alt="{{item.filename}}" height="50" [preview]="true"></p-image>
                                                    <button class="btn btn-secondary btn-icon btn-sm" *ngIf="item.type != 'image/jpeg' && item.type != 'image/png'" (click)="openFile(item.file_location)">
                                                        <i class="bi bi-camera-reels mr-1"></i> <br> View Video
                                                    </button>
                                                </td>
                                                <td>{{item.filename}}</td>
                                                <td>{{item.size}}</td>
                                                <td><button class="btn btn-sm btn-outline-secondary" (click)="deleteImage(item)"><i class="bi bi-trash mr-1"></i> Hapus</button></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <!-- <ul *ngIf="uploadedFiles.length">
                                        <li *ngFor="let file of uploadedFiles">{{file.name}} - {{file.size}} bytes asdasd</li>
                                    </ul> -->
                                </ng-template>
                            </p-fileUpload>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>