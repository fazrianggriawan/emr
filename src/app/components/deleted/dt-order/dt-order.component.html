<p-table [value]="products" selectionMode="single" [(selection)]="selectedProduct" (onRowSelect)="selectProduct($event)" dataKey="code" styleClass="p-datatable-striped" [paginator]="true" [rows]="5" [showCurrentPageReport]="true">
    <ng-template pTemplate="header">
        <tr>
            <th>Code</th>
            <th>Name</th>
            <th>Category</th>
            <th>Quantity</th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-product>
        <tr [pSelectableRow]="product">
            <td>{{product.code}}</td>
            <td>{{product.name}}</td>
            <td>{{product.category}}</td>
            <td>{{product.quantity}}</td>
        </tr>
    </ng-template>
</p-table>
<div class="p-pt-2 p-pb-2 p-text-right">
    <p-button [routerLink]="['/order']"label="View All Orders" icon="pi pi-table" styleClass="p-button-sm"></p-button>
</div>


<p-dialog header="Order Detail" [(visible)]="dialogOrder" [style]="{width: '50vw'}">
    <div class="p-grid p-pt-1">
        <div class="p-col">
            <div class="p-field p-grid">
                <label for="Order ID" class="p-col">Order ID</label>
                <div class="p-col">
                    <input type="text" pInputText disabled>
                </div>
            </div>
            <div class="p-field p-grid">
                <label for="Order ID" class="p-col">Order Date</label>
                <div class="p-col">
                    <input type="text" pInputText disabled>
                </div>
            </div>
        </div>
        <div class="p-col">
            <div class="p-field p-grid">
                <label for="Order ID" class="p-col">Customer ID</label>
                <div class="p-col">
                    <input type="text" pInputText disabled>
                </div>
            </div>
            <div class="p-field p-grid">
                <label for="Order ID" class="p-col">Customer Name</label>
                <div class="p-col">
                    <input type="text" pInputText disabled>
                </div>
            </div>
        </div>
    </div>
    <hr class="p-p-0 p-m-0">
    <p-tabView>
        <p-tabPanel header="Order Items">
            <div class="p-grid">
                <div class="card p-col p-p-3 p-m-2">
                    Total Item:&nbsp; <span class="tx-14 tx-bold">3 Items</span>
                </div>
                <div class="card p-col p-p-3 p-m-2">
                    Total Amount:&nbsp; <span class="tx-14 tx-bold">3,500,000</span>
                </div>
            </div>
            <div class="p-grid">
                <div class="p-col">
                    <p-table [value]="orderHistories" class="p-datatable-unstriped">
                        <ng-template pTemplate="header">
                            <tr>
                                <th>Product ID</th>
                                <th>Name</th>
                                <th>Variant</th>
                                <th>Qty</th>
                                <th>Price</th>
                                <th>Total</th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-product>
                            <tr [pSelectableRow]="product">
                                <td><a href="#">{{product.productId}}</a></td>
                                <td>{{product.item}}</td>
                                <td>{{product.variant}}</td>
                                <td>{{product.qty}}</td>
                                <td>{{product.price}}</td>
                                <td>{{product.total}}</td>
                            </tr>
                        </ng-template>
                    </p-table>
                </div>
            </div>
        </p-tabPanel>
        <p-tabPanel header="Customer Data">
            <div class="p-grid">
                <div class="p-col p-text-right">
                    <button pButton type="button" label="Edit this data" icon="pi pi-pencil" class="p-button-outlined p-button-secondary p-button-sm"></button>
                </div>
            </div>
            <div class="p-fluid p-pt-0">
                <div class="p-field p-grid">
                    <label for="Order ID" class="p-col-3">Customer ID</label>
                    <div class="p-col">
                        <input type="text" disabled="disabled" pInputText>
                    </div>
                </div>
                <div class="p-field p-grid">
                    <label for="Order ID" class="p-col-3">Name</label>
                    <div class="p-col">
                        <input type="text" pInputText disabled="disabled">
                    </div>
                </div>
                <div class="p-field p-grid">
                    <label for="Order ID" class="p-col-3">Address</label>
                    <div class="p-col">
                        <input type="text" pInputText disabled="disabled">
                    </div>
                </div>
                <div class="p-field p-grid">
                    <label for="Order ID" class="p-col-3">City</label>
                    <div class="p-col">
                        <input type="text" pInputText disabled="disabled">
                    </div>
                </div>
                <div class="p-field p-grid">
                    <label for="Order ID" class="p-col-3">Province</label>
                    <div class="p-col">
                        <input type="text" pInputText disabled="disabled">
                    </div>
                </div>
                <div class="p-field p-grid">
                    <label for="Order ID" class="p-col-3">Country</label>
                    <div class="p-col">
                        <input type="text" pInputText disabled="disabled">
                    </div>
                </div>
                <div class="p-field p-grid">
                    <label for="Order ID" class="p-col-3">Zipcode</label>
                    <div class="p-col">
                        <input type="text" pInputText disabled="disabled">
                    </div>
                </div>
                <div class="p-field p-grid">
                    <label for="Order ID" class="p-col-3">Email</label>
                    <div class="p-col">
                        <input type="text" pInputText disabled="disabled">
                    </div>
                </div>
                <div class="p-field p-grid">
                    <label for="Order ID" class="p-col-3">Phone</label>
                    <div class="p-col">
                        <input type="text" pInputText disabled="disabled">
                    </div>
                </div>
            </div>
        </p-tabPanel>
        <p-tabPanel header="Order History">
            <div class="p-grid">
                <div class="card p-col p-p-3 p-m-2">
                    Total Order:&nbsp; <span class="tx-14 tx-bold">2 Orders (16 items)</span>
                </div>
                <div class="card p-col p-p-3 p-m-2">
                    Total Amount:&nbsp; <span class="tx-14 tx-bold">5,000,000</span>
                </div>
            </div>
            <p-table [value]="orderHistories" styleClass="p-datatable-unstriped">
                <ng-template pTemplate="header">
                    <tr>
                        <th width="50px;">&nbsp;</th>
                        <th>Item</th>
                        <th>Price</th>
                        <th>Qty</th>
                        <th>Total</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-history let-rowIndex="rowIndex">
                    <tr *ngIf="rowGroupMetadata[history.orderId].index === rowIndex" class="header-row-group">
                        <td colspan="2">
                            <b>Order ID:</b> <a href="#"> {{history.orderId}}</a>
                        </td>
                        <td colspan="2">
                            <b>Order Date:</b> {{history.date}}
                        </td>
                        <td>
                            <span class="badge badge-success">{{history.status}}</span>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>{{history.item}}</td>
                        <td>{{history.price}}</td>
                        <td>{{history.qty}}</td>
                        <td>{{history.total}}</td>
                    </tr>
                </ng-template>
            </p-table>
        </p-tabPanel>
    </p-tabView>
    <ng-template pTemplate="footer">
        <div class="p-grid p-m-0 p-p-0">
            <div class="p-col p-text-left"><p-button icon="pi pi-ban" label="Cancel this order" styleClass="p-button-secondary p-button-text"></p-button></div>
            <div class="p-col p-text-right"><p-button icon="pi pi-check" label="Process this order"></p-button></div>
        </div>

    </ng-template>
</p-dialog>